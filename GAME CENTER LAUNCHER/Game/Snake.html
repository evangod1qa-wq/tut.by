<!DOCTYPE html>
<html lang="ru">
<head>
    <title>Змейка</title>
    <style>
        body { background: #010409; color: white; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        canvas { background: #111; border: 2px solid #00d4ff; }
    </style>
</head>
<body>
    <canvas id="game" width="400" height="400"></canvas>
    <script>
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');
        const gridSize = 20;
        let score = 0;
        const snake = [{x: 10 * gridSize, y: 10 * gridSize}];
        let food = {};
        let dx = 0, dy = 0;

        function placeFood() { food = { x: Math.floor(Math.random() * (canvas.width / gridSize)) * gridSize, y: Math.floor(Math.random() * (canvas.height / gridSize)) * gridSize }; }
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowUp' && dy === 0) { dx = 0; dy = -gridSize; }
            if (e.key === 'ArrowDown' && dy === 0) { dx = 0; dy = gridSize; }
            if (e.key === 'ArrowLeft' && dx === 0) { dx = -gridSize; dy = 0; }
            if (e.key === 'ArrowRight' && dx === 0) { dx = gridSize; dy = 0; }
        });

        function gameLoop() {
            const head = { x: snake[0].x + dx, y: snake[0].y + dy };
            snake.unshift(head);

            if (head.x === food.x && head.y === food.y) { score++; placeFood(); }
            else { snake.pop(); }

            if (head.x < 0 || head.x >= canvas.width || head.y < 0 || head.y >= canvas.height || snake.slice(1).some(segment => segment.x === head.x && segment.y === head.y)) {
                alert('Game Over! Score: ' + score); score = 0; snake.length = 1; dx = 0; dy = 0; placeFood();
            }
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'red'; ctx.fillRect(food.x, food.y, gridSize, gridSize);
            ctx.fillStyle = 'lime';
            snake.forEach(segment => ctx.fillRect(segment.x, segment.y, gridSize, gridSize));
            setTimeout(gameLoop, 100);
        }
        placeFood();
        gameLoop();
    </script>
</body>
</html>
